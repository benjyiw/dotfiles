#!/bin/bash

cd "${HOME}" || exit 1

echo "Init submodules"
yadm submodule update --recursive --init

echo "Install oh-my-zsh"
sh -c "$(curl -fsSL https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"

echo "Installing vim plug"
curl -fLo ~/.vim/autoload/plug.vim --create-dirs \
    https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
vim +PlugInstall +qall

# prevent certain files from being present
yadm gitconfig core.sparseCheckout true
cat << EOF > "$HOME/.config/yadm/repo.git/info/sparse-checkout"
# generated by $0
/*
!README.md
EOF
yadm checkout --quiet
